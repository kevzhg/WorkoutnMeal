<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fitness Tracker - Workouts, Meals & Weight</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&family=Inter:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="app-container">
      <!-- Navigation -->
      <nav class="main-nav">
        <div class="nav-brand">
          <h1>üí™ Fitness Tracker</h1>
        </div>
        <ul class="nav-links">
          <li>
            <a href="#" data-page="dashboard" class="nav-link active"
              >Dashboard</a
            >
          </li>
          <li>
            <a href="#" data-page="live-workout" class="nav-link"
              >Live Workout</a
            >
          </li>
          <li>
            <a href="#" data-page="workouts" class="nav-link">Workouts</a>
          </li>
          <li><a href="#" data-page="meals" class="nav-link">Meal Plan</a></li>
          <li>
            <a href="#" data-page="weight" class="nav-link">Weight Calendar</a>
          </li>
          <li>
            <a href="#" data-page="onigiri" class="nav-link">Onigiri</a>
          </li>
        </ul>
      </nav>

      <!-- Main Content -->
      <main class="main-content">
        <!-- Dashboard Page -->
        <section id="dashboard" class="page active">
          <h2>Dashboard</h2>
          <div class="dashboard-grid">
            <div class="dashboard-card">
              <h3>Today's Training Session</h3>
              <div id="dashboard-workout-summary">
                <p class="no-data">No training logged today</p>
              </div>
            </div>
            <div class="dashboard-card">
              <h3>Today's Meals</h3>
              <div id="dashboard-meals-summary">
                <p class="no-data">No meals logged today</p>
              </div>
            </div>
            <div class="dashboard-card">
              <h3>Current Weight</h3>
              <div id="dashboard-weight-summary">
                <p class="no-data">No weight logged</p>
              </div>
            </div>
            <div class="dashboard-card">
              <h3>Weekly Progress</h3>
              <div id="dashboard-progress">
                <p class="no-data">Start logging to see progress</p>
              </div>
            </div>
            <div class="dashboard-card dashboard-recent-workouts">
              <h3>Recent Training Sessions</h3>
              <div id="dashboard-recent-workouts">
                <p class="no-data">No training sessions logged yet</p>
              </div>
            </div>
          </div>
        </section>

        <!-- Live Workout Page -->
        <section id="live-workout" class="page live-workout-page">
            <div class="live-hero" id="live-hero">
              <div class="live-hero-text">
                <p class="eyebrow">Live Training</p>
                <h2>Build & Run Sessions</h2>
                <p class="small-text">Push, Pull, Legs templates. Save, clone, and start live workouts.</p>
              </div>
            </div>

            <!-- Program Selection Screen -->
            <div id="program-selection" class="program-selection">
              <div class="live-tabs">
                <button class="tab-btn active" data-tab="start">Start Training</button>
                <button class="tab-btn" data-tab="build">Build Training</button>
              </div>

              <div id="tab-start" class="tab-panel active">
                <div class="programs-header">
                  <div>
                    <p class="eyebrow">Saved Trainings</p>
                    <h3>Start, Clone, Edit</h3>
                  </div>
                </div>
                <div id="program-list" class="program-grid">
                  <!-- Program cards rendered by JS -->
                </div>
              </div>

              <div id="tab-build" class="tab-panel">
                <div class="live-layout">
                  <div class="builder-card card">
                    <div class="builder-header">
                      <div class="builder-header-row">
                        <h3>Build Training</h3>
                        <p id="builder-editing-label" class="builder-editing-label" style="display: none;"></p>
                      </div>
                      <div class="builder-segmented" id="builder-segmented">
                        <button class="segment-btn active" data-category="push">Push</button>
                        <button class="segment-btn" data-category="pull">Pull</button>
                        <button class="segment-btn" data-category="legs">Legs</button>
                      </div>
                      <div class="builder-name-row">
                        <label class="label-caps" for="builder-name">Session Name</label>
                        <input type="text" id="builder-name" placeholder="e.g., Heavy Push" />
                      </div>
                    </div>

                    <div class="builder-add">
                      <div class="builder-add-row">
                        <div class="builder-search">
                          <input type="text" id="builder-exercise-search" placeholder="Search exercises‚Ä¶" />
                          <select id="builder-exercise"></select>
                        </div>
                        <div class="builder-steppers">
                          <div class="stepper">
                            <label class="label-caps" for="builder-sets">Sets</label>
                            <input type="number" id="builder-sets" min="1" value="4" />
                          </div>
                          <div class="stepper">
                            <label class="label-caps" for="builder-reps">Reps</label>
                            <input type="number" id="builder-reps" min="1" value="8" />
                          </div>
                          <button id="builder-add-exercise" class="btn btn-primary" type="button">+ Add exercise</button>
                        </div>
                      </div>
                    </div>

                    <div id="builder-exercise-list" class="builder-exercise-list">
                      <p class="no-data">No exercises added yet.</p>
                    </div>
                    <div id="builder-summary" class="builder-summary">
                      <span id="builder-summary-count">0 exercises</span>
                      <span id="builder-summary-sets">0 sets total</span>
                    </div>
                    <div class="builder-actions">
                      <button id="builder-reset" class="btn btn-ghost" type="button">Reset</button>
                      <div class="builder-actions-right">
                        <button id="builder-cancel-edit" class="btn btn-secondary" type="button" style="display: none;">Cancel Edit</button>
                        <button id="builder-save" class="btn btn-primary" type="button">Save Workout</button>
                      </div>
                    </div>
                  </div>

                  <div class="library-card card">
                    <div class="library-header">
                      <div>
                        <p class="eyebrow">Exercise Library</p>
                        <h3>Browse & Quick Add</h3>
                      </div>
                      <button id="library-toggle" class="btn btn-secondary mobile-only" type="button">Toggle Library</button>
                    </div>
                    <div class="library-new-exercise">
                      <div class="library-new-row">
                        <div class="library-input">
                          <label class="label-caps" for="new-exercise-name">Name</label>
                          <input type="text" id="new-exercise-name" placeholder="e.g., Bulgarian Split Squat" />
                        </div>
                        <div class="library-input">
                          <label class="label-caps" for="new-exercise-category">Category</label>
                          <select id="new-exercise-category">
                            <option value="push">Push</option>
                            <option value="pull">Pull</option>
                            <option value="legs">Legs</option>
                          </select>
                        </div>
                        <div class="library-input">
                          <label class="label-caps" for="new-exercise-type">Type</label>
                          <select id="new-exercise-type">
                            <option value="compound">Compound</option>
                            <option value="power">Power</option>
                            <option value="hypertrophy">Hypertrophy</option>
                            <option value="flexibility">Flexibility</option>
                            <option value="cardio">Cardio</option>
                          </select>
                        </div>
                      </div>
                      <div class="library-new-row">
                        <div class="library-input">
                          <label class="label-caps" for="new-exercise-sets">Default Sets</label>
                          <input type="number" id="new-exercise-sets" min="1" value="3" />
                        </div>
                        <div class="library-input">
                          <label class="label-caps" for="new-exercise-reps">Default Reps</label>
                          <input type="text" id="new-exercise-reps" placeholder="8-12" value="10" />
                        </div>
                        <div class="library-input">
                          <label class="label-caps" for="new-exercise-rest">Rest (sec)</label>
                          <input type="number" id="new-exercise-rest" min="0" value="60" />
                        </div>
                      </div>
                      <div class="library-new-row">
                        <div class="library-input">
                          <label class="label-caps" for="new-exercise-muscles">Muscles (comma separated)</label>
                          <input type="text" id="new-exercise-muscles" placeholder="Glutes, Hamstrings" />
                        </div>
                        <div class="library-input">
                          <label class="label-caps" for="new-exercise-equipment">Equipment</label>
                          <input type="text" id="new-exercise-equipment" placeholder="Dumbbells, Bench" />
                        </div>
                        <div class="library-input library-save">
                          <label class="label-caps">&nbsp;</label>
                          <button id="save-exercise-btn" class="btn btn-primary" type="button">Save Exercise</button>
                          <button id="cancel-exercise-btn" class="btn btn-ghost" type="button" style="display: none;">Cancel Edit</button>
                        </div>
                      </div>
                    </div>
                    <div class="library-filters">
                      <input type="text" id="library-search" placeholder="Search exercises‚Ä¶" />
                      <div class="library-chips">
                        <button class="chip active" data-library-category="all">All</button>
                        <button class="chip" data-library-category="push">Push</button>
                        <button class="chip" data-library-category="pull">Pull</button>
                        <button class="chip" data-library-category="legs">Legs</button>
                      </div>
                      <div class="library-type-chips">
                        <button class="chip active" data-library-type="all">All Types</button>
                        <button class="chip" data-library-type="power">Power</button>
                        <button class="chip" data-library-type="hypertrophy">Hypertrophy</button>
                        <button class="chip" data-library-type="compound">Compound</button>
                        <button class="chip" data-library-type="flexibility">Flexibility</button>
                        <button class="chip" data-library-type="cardio">Cardio</button>
                      </div>
                    </div>
                    <div id="exercise-library-list" class="exercise-library-list"></div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Active Workout Screen -->
            <div id="active-workout-screen" class="active-workout-screen" style="display: none;">
                <!-- Rest Timer (shown when resting) -->
                <div id="rest-timer-container" class="rest-timer-container" style="display: none;">
                    <div class="rest-timer">
                        <h3 id="rest-title">Rest Time</h3>
                        <div id="rest-countdown" class="rest-countdown">01:30</div>
                        <div class="rest-controls">
                            <button id="add-rest-time-btn" class="btn btn-secondary">+30s</button>
                            <button id="skip-rest-btn" class="btn btn-primary">Skip Rest</button>
                        </div>
                    </div>
                </div>

                <!-- Compact Header with Timer Inline -->
                <div class="workout-compact-header">
                    <div class="workout-title-timer">
                        <h3 id="active-program-name">Push Day</h3>
                        <div class="workout-timer-inline">
                            <span class="timer-icon">‚è±Ô∏è</span>
                            <span id="workout-duration" class="timer-value-inline">00:00</span>
                        </div>
                        <div class="completed-exercises-chips" id="completed-exercise-chips" style="display: none;"></div>
                    </div>
                    <div class="workout-controls-inline">
                        <button id="reset-workout-btn" class="btn btn-secondary btn-small">üîÑ Reset</button>
                        <button id="pause-workout-btn" class="btn btn-secondary btn-small">‚è∏Ô∏è Pause</button>
                        <button id="end-workout-btn" class="btn btn-danger btn-small">‚úì Finish</button>
                    </div>
                </div>
                <!-- Exercise List -->
                <div id="exercise-list" class="exercise-list">
                    <!-- Exercises will be rendered here dynamically -->
                </div>
            </div>
        </section>

        <!-- Workouts Page -->
        <section id="workouts" class="page">
          <h2>Workout Tracker</h2>
          <div class="page-content">
            <div class="form-section">
              <h3>Add Workout</h3>
              <form id="workout-form">
                <div class="form-group">
                  <label for="workout-date">Date</label>
                  <input type="date" id="workout-date" required />
                </div>
                <div class="form-group">
                  <label for="workout-type">Workout Type</label>
                  <select id="workout-type" required>
                    <option value="">Select type...</option>
                    <option value="strength">Strength Training</option>
                    <option value="cardio">Cardio</option>
                    <option value="hiit">HIIT</option>
                    <option value="yoga">Yoga</option>
                    <option value="stretching">Stretching</option>
                    <option value="sports">Sports</option>
                    <option value="other">Other</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="workout-duration">Duration (minutes)</label>
                  <input type="number" id="workout-duration" min="1" required />
                </div>
                <div class="form-group">
                  <label for="workout-exercises">Exercises</label>
                  <textarea
                    id="workout-exercises"
                    rows="4"
                    placeholder="e.g., Bench Press 3x10, Squats 4x8..."
                  ></textarea>
                </div>
                <div class="form-group">
                  <label for="workout-notes">Notes</label>
                  <textarea
                    id="workout-notes"
                    rows="2"
                    placeholder="How did you feel?"
                  ></textarea>
                </div>
                <button type="submit" class="btn btn-primary">
                  Add Workout
                </button>
              </form>
            </div>
            <div class="list-section">
              <h3>Workout History</h3>
              <div id="workout-list" class="item-list">
                <p class="no-data">No workouts logged yet</p>
              </div>
            </div>
          </div>
        </section>

        <!-- Meals Page -->
        <section id="meals" class="page">
          <h2>Meal Plan</h2>
          <div class="page-content">
            <div class="form-section">
              <h3>Add Meal</h3>
              <form id="meal-form">
                <div class="form-group">
                  <label for="meal-date">Date</label>
                  <input type="date" id="meal-date" required />
                </div>
                <div class="form-group">
                  <label for="meal-type">Meal Type</label>
                  <select id="meal-type" required>
                    <option value="">Select meal...</option>
                    <option value="breakfast">Breakfast</option>
                    <option value="lunch">Lunch</option>
                    <option value="dinner">Dinner</option>
                    <option value="snack">Snack</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="meal-name">Meal Name</label>
                  <input
                    type="text"
                    id="meal-name"
                    placeholder="e.g., Grilled Chicken Salad"
                    required
                  />
                </div>
                <div class="form-group">
                  <label for="meal-calories">Calories (optional)</label>
                  <input
                    type="number"
                    id="meal-calories"
                    min="0"
                    placeholder="e.g., 500"
                  />
                </div>
                <div class="form-group">
                  <label for="meal-protein">Protein (g, optional)</label>
                  <input
                    type="number"
                    id="meal-protein"
                    min="0"
                    placeholder="e.g., 30"
                  />
                </div>
                <div class="form-group">
                  <label for="meal-description">Description/Ingredients</label>
                  <textarea
                    id="meal-description"
                    rows="3"
                    placeholder="List ingredients or describe the meal..."
                  ></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Add Meal</button>
              </form>
            </div>
            <div class="list-section">
              <h3>Meal History</h3>
              <div id="meal-list" class="item-list">
                <p class="no-data">No meals logged yet</p>
              </div>
            </div>
          </div>
        </section>

        <!-- Weight Calendar Page -->
        <section id="weight" class="page">
          <h2>Weight Calendar</h2>
          <div class="page-content weight-page">
            <div class="form-section">
              <h3>Log Weight</h3>
              <form id="weight-form">
                <div class="form-group">
                  <label for="weight-date">Date</label>
                  <input type="date" id="weight-date" required />
                </div>
                <div class="form-group">
                  <label for="weight-value">Weight</label>
                  <div class="input-group">
                    <input
                      type="number"
                      id="weight-value"
                      step="0.1"
                      min="0"
                      required
                    />
                    <select id="weight-unit">
                      <option value="lbs">lbs</option>
                      <option value="kg">kg</option>
                    </select>
                  </div>
                </div>
                <div class="form-group">
                  <label for="weight-notes">Notes (optional)</label>
                  <input
                    type="text"
                    id="weight-notes"
                    placeholder="e.g., After workout"
                  />
                </div>
                <button type="submit" class="btn btn-primary">
                  Log Weight
                </button>
              </form>
            </div>
            <div class="calendar-section">
              <div class="calendar-header">
                <button id="prev-month" class="btn btn-secondary">
                  &lt; Prev
                </button>
                <h3 id="calendar-month-year">January 2024</h3>
                <button id="next-month" class="btn btn-secondary">
                  Next &gt;
                </button>
              </div>
              <div class="calendar-grid">
                <div class="calendar-weekdays">
                  <span>Sun</span>
                  <span>Mon</span>
                  <span>Tue</span>
                  <span>Wed</span>
                  <span>Thu</span>
                  <span>Fri</span>
                  <span>Sat</span>
                </div>
                <div id="calendar-days" class="calendar-days">
                  <!-- Days will be generated by JavaScript -->
                </div>
              </div>
              <div class="weight-stats">
                <div class="stat">
                  <span class="stat-label">Starting Weight</span>
                  <span id="starting-weight" class="stat-value">--</span>
                </div>
                <div class="stat">
                  <span class="stat-label">Current Weight</span>
                  <span id="current-weight" class="stat-value">--</span>
                </div>
                <div class="stat">
                  <span class="stat-label">Change</span>
                  <span id="weight-change" class="stat-value">--</span>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Onigiri Planner Page -->
        <section id="onigiri" class="page onigiri-page">
          <h2>Onigiri Planner</h2>
          <div class="onigiri-hero card">
            <div class="onigiri-hero-text">
              <p class="eyebrow">Onigiri Shop</p>
              <h2>Planner</h2>
              <p class="small-text">
                Map every task to open day ‚Äî permits, recipes, marketing, and logistics.
              </p>
              <div class="onigiri-hero-chips">
                <span class="chip subtle" id="onigiri-progress-pill">0% complete</span>
                <span class="chip subtle" id="onigiri-item-count">No items yet</span>
                <span class="onigiri-save-status" id="onigiri-save-status"></span>
              </div>
            </div>
            <div class="onigiri-hero-visual">
              <div class="onigiri-shape">
                <div class="onigiri-fill" id="onigiri-fill"></div>
                <div class="onigiri-nori"></div>
                <div class="onigiri-seed seed-a"></div>
                <div class="onigiri-seed seed-b"></div>
                <div class="onigiri-seed seed-c"></div>
                <div class="onigiri-progress-number" id="onigiri-progress-number">0%</div>
              </div>
            </div>
          </div>

          <div class="onigiri-controls card">
            <div class="onigiri-controls-header">
              <div>
                <p class="eyebrow">Sections</p>
                <h3>Break down your launch</h3>
                <p class="small-text">Add weighted sections to track tasks evenly or by impact.</p>
              </div>
              <div class="onigiri-control-fields">
                <div class="onigiri-field">
                  <label class="label-caps" for="onigiri-section-name">Section name</label>
                  <input
                    type="text"
                    id="onigiri-section-name"
                    class="onigiri-input"
                    placeholder="e.g., Business Plan"
                  />
                </div>
                <button id="onigiri-add-section" class="btn btn-primary" type="button">
                  + Add Section
                </button>
              </div>
            </div>
          </div>

          <div id="onigiri-sections" class="onigiri-sections-grid"></div>
        </section>
      </main>
    </div>

    <script>
      // Use Render API in production (GitHub Pages), fall back to localhost for dev.
      if (location.hostname.endsWith('github.io')) {
        window.API_BASE_URL = 'https://homebase-50dv.onrender.com/api';
      }
    </script>
    <script type="module" src="dist/app.js"></script>
  </body>
</html>
